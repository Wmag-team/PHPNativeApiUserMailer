# Документация по API

Перед использованием запустите команду: cd docker && docker-compose up -d
Проверьте файл конфигурации: /config.php 

## Базовый URL

Базовый URL для всех конечных точек API: `http://localhost`

## Конечные точки

### 1. Загрузка CSV

- **URL:** `/upload-csv`
- **Метод:** POST
- **Описание:** Загрузка CSV-файла, содержащего данные пользователей (номера телефонов и имена).
- **Ответ:**
  - Успех (200 OK):
    ```json
    {
      "message": "CSV успешно загружен"
    }
    ```
  - Ошибка (500 Internal Server Error):
    ```json
    {
      "error": "Сообщение об ошибке"
    }
    ```

### 2. Создание кампании

- **URL:** `/campaigns`
- **Метод:** POST
- **Описание:** Создание новой кампании рассылки.
- **Тело запроса:**
  ```json
  {
    "name": "Название кампании"
  }
  ```
- **Ответ:**
  - Успех (200 OK):
    ```json
    {
      "id": 1,
      "message": "Кампания успешно создана"
    }
    ```

### 3. Запуск кампании

- **URL:** `/campaigns/start`
- **Метод:** POST
- **Описание:** Запуск кампании рассылки.
- **Тело запроса:**
  ```json
  {
    "campaign_id": 1
  }
  ```
- **Ответ:**
  - Успех (200 OK):
    ```json
    {
      "message": "Кампания успешно запущена"
    }
    ```

### 4. Остановка кампании

- **URL:** `/campaigns/stop`
- **Метод:** POST
- **Описание:** Остановка запущенной кампании рассылки.
- **Тело запроса:**
  ```json
  {
    "campaign_id": 1
  }
  ```
- **Ответ:**
  - Успех (200 OK):
    ```json
    {
      "message": "Кампания успешно остановлена"
    }
    ```

### 5. Возобновление кампании

- **URL:** `/campaigns/resume`
- **Метод:** POST
- **Описание:** Возобновление остановленной кампании рассылки.
- **Тело запроса:**
  ```json
  {
    "campaign_id": 1
  }
  ```
- **Ответ:**
  - Успех (200 OK):
    ```json
    {
      "message": "Кампания успешно возобновлена"
    }
    ```

### 6. Получение информации о кампании

- **URL:** `/campaigns?id=1`
- **Метод:** GET
- **Описание:** Получение информации о конкретной кампании.
- **Параметры запроса:**
  - `id`: ID кампании (обязательный)
- **Ответ:**
  - Успех (200 OK):
    ```json
    {
      "id": 1,
      "name": "Название кампании",
      "status": "running",
      "created_at": "2023-10-03 12:00:00",
      "updated_at": "2023-10-03 12:30:00"
    }
    ```
  - Ошибка (404 Not Found):
    ```json
    {
      "error": "Кампания не найдена"
    }
    ```

## Обработка ошибок

Все конечные точки будут возвращать соответствующие HTTP-коды состояния вместе с JSON-ответами. В случае ошибок ответ будет содержать поле "error" с описанием ошибки.

## Аутентификация

Данный API в настоящее время не реализует аутентификацию. Рекомендуется реализовать надлежащие механизмы аутентификации и авторизации перед развертыванием в производственной среде.

## Ограничение скорости

В настоящее время на этом API не реализованы ограничения скорости. Рекомендуется реализовать ограничение скорости в производственной среде для предотвращения злоупотреблений.

## Примечания

- Убедитесь, что ваш CSV-файл для загрузки пользователей соответствует правильному формату: номер телефона и имя, разделенные точкой с запятой (;).
- API использует базу данных PostgreSQL для хранения информации о пользователях и кампаниях.
- Операции рассылки симулируются и логируются. В производственной среде интегрируйте с реальным SMS-шлюзом или сервисом электронной почты.
